"use strict";(self["webpackChunkgaku_navi2"]=self["webpackChunkgaku_navi2"]||[]).push([[352],{9352:function(s,e,i){i.r(e),i.d(e,{default:function(){return H}});var t=i(3396),a=i(7139),c=i(9242);const n=s=>((0,t.dD)("data-v-a5289dde"),s=s(),(0,t.Cn)(),s),o={class:"wapper"},r={class:"leftMenu"},l=n((()=>(0,t._)("span",{class:"material-icons md-18"},"skip_previous",-1))),m=[l],h={class:"slideArea"},d=["src"],u={class:"messageArea"},g={class:"messageMenu"},p={style:{display:"flex"}},_=n((()=>(0,t._)("span",{class:"material-icons md-18"},"face",-1))),x=[_],I={class:"flex"},w=n((()=>(0,t._)("span",{class:"material-icons md-18"},"textsms",-1))),k=[w],v=n((()=>(0,t._)("span",{class:"material-icons md-18"},"music_note",-1))),V=[v],C=n((()=>(0,t._)("span",{class:"material-icons md-18"},"loop",-1))),S=[C],y=n((()=>(0,t._)("span",{class:"material-icons md-18"},"stop",-1))),T=[y],f=n((()=>(0,t._)("span",{class:"material-icons md-18"},"play_arrow",-1))),A=[f],b={class:"voiceSpeed"},M=n((()=>(0,t._)("span",{class:"material-icons md-18"},"speed",-1))),$=["src"],F={class:"message"},N={class:"rightMenu"},z=n((()=>(0,t._)("span",{class:"material-icons md-18"},"menu",-1))),L=[z],P=["onClick"];function D(s,e,i,n,l,_){const w=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("section",o,[(0,t._)("nav",r,[(0,t.Wm)(w,{to:{name:"IndexList",params:{course:l.course}}},{default:(0,t.w5)((()=>[(0,t._)("button",{onClick:e[0]||(e[0]=(...s)=>_.reset&&_.reset(...s))},m)])),_:1},8,["to"])]),(0,t._)("main",null,[(0,t._)("section",h,[(0,t._)("img",{src:_.slideImage,class:(0,a.C_)(["slideImg",l.isText?"texton":"textoff"]),alt:"slide"},null,10,d)]),(0,t._)("section",u,[(0,t._)("section",g,[(0,t._)("section",p,[(0,t._)("button",{class:(0,a.C_)(l.isActor?"isTrue":"isFalse"),onClick:e[1]||(e[1]=(...s)=>_.switchActor&&_.switchActor(...s))},x,2),(0,t._)("div",{class:(0,a.C_)(["actorName",{none:!l.isActor}])},(0,a.zw)(_.actorName),3)]),(0,t._)("section",I,[(0,t._)("button",{class:(0,a.C_)(l.isText?"isTrue":"isFalse"),onClick:e[2]||(e[2]=s=>l.isText=!l.isText)},k,2),(0,t._)("button",{class:(0,a.C_)(l.isVoice?"isTrue":"isFalse"),onClick:e[3]||(e[3]=(...s)=>_.switchVoice&&_.switchVoice(...s))},V,2),(0,t._)("button",{class:(0,a.C_)(l.isSkip?"isTrue":"isFalse"),onClick:e[4]||(e[4]=(...s)=>_.switchSkip&&_.switchSkip(...s))},S,2),(0,t._)("button",{onClick:e[5]||(e[5]=(...s)=>_.voiceStop&&_.voiceStop(...s))},T),(0,t._)("button",{onClick:e[6]||(e[6]=(...s)=>_.voicePlay&&_.voicePlay(...s))},A),(0,t._)("div",b,[M,(0,t.wy)((0,t._)("input",{type:"range",min:"0.5",max:"2",step:"0.1","onUpdate:modelValue":e[7]||(e[7]=s=>l.voiceSpeed=s)},null,512),[[c.nr,l.voiceSpeed]]),(0,t._)("div",null,(0,a.zw)(l.voiceSpeed),1)])])]),(0,t.wy)((0,t._)("section",{class:"messagewindow",onClick:e[8]||(e[8]=(...s)=>_.next&&_.next(...s))},[(0,t.wy)((0,t._)("section",null,[(0,t._)("img",{src:_.actorImage,class:"actor",alt:"actor"},null,8,$)],512),[[c.F8,l.isActor]]),(0,t._)("section",F,(0,a.zw)(_.messageText),1)],512),[[c.F8,l.isText]])])]),(0,t._)("nav",N,[(0,t._)("button",{onClick:e[9]||(e[9]=(...s)=>_.switchMenu&&_.switchMenu(...s))},L),(0,t.wy)((0,t._)("ul",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.scenario,((s,e)=>((0,t.wg)(),(0,t.iD)("li",{key:e,class:(0,a.C_)({isTrue:e==l.pageIndex}),onClick:s=>_.pageJump(e)},(0,a.zw)(("00"+(e+1)).slice(-2))+"："+(0,a.zw)(s.title),11,P)))),128))],512),[[c.F8,l.isMenu]])])])}var J=i(6943),Z={name:"LectureView",data(){return{course:this.$route.params.course,id:this.$route.params.id,scenario:[],isText:!0,isActor:!0,isMenu:!0,isVoice:!0,isSkip:!0,pageIndex:0,messageIndex:0,messageVoice:new Audio(""),voiceSpeed:1}},mounted(){const s=`./${this.course}/${this.id}/scenario.json`;J.Z.get(s).then((s=>this.scenario=s.data)).catch((s=>{console.log(s),this.scenario=[{part:"制作中"}]}))},methods:{switchActor(){this.isActor=!this.isActor},switchVoice(){this.isVoice=!this.isVoice,this.isVoice||(this.isSkip=!1)},switchSkip(){this.isSkip=!this.isSkip,this.isSkip&&(this.isVoice=!0)},switchMenu(){this.isMenu=!this.isMenu},pageJump(s){this.pageIndex=s,this.messageIndex=0,this.messageVoice.pause(),this.isVoice&&this.voicePlay()},next(){if(this.messageVoice.pause(),this.messageIndex++,"LAST"==this.messageText){if(this.scenario.length==this.pageIndex+1)return void this.messageIndex--;this.pageIndex++,this.messageIndex=0}this.isVoice&&this.voicePlay()},voicePlay(){this.messageVoice.pause();let s=this.scenario[this.pageIndex].message[this.messageIndex].voice;s&&(this.messageVoice=new Audio("./"+this.course+"/"+this.id+"/voice/"+s),this.messageVoice.playbackRate=this.voiceSpeed,this.messageVoice.play(),this.messageVoice.addEventListener("ended",(()=>{this.isSkip&&this.next()})))},voiceStop(){this.messageVoice.pause()},reset(){this.messageVoice.pause(),this.pageIndex=0,this.messageIndex=0}},computed:{slideImage(){try{return this.scenario[this.pageIndex].message[this.messageIndex].slide?`./${this.course}/${this.id}/img/${this.scenario[this.pageIndex].message[this.messageIndex].slide}`:"./common/background/cloud2.png"}catch{return{mes:"制作中です"}}},actorName(){try{return this.scenario[this.pageIndex].message[this.messageIndex].actor?this.scenario[this.pageIndex].message[this.messageIndex].actor:"No Name"}catch{return"No Name"}},actorImage(){try{return this.scenario[this.pageIndex].message[this.messageIndex].actorImg?`./common/actor/${this.scenario[this.pageIndex].message[this.messageIndex].actorImg}`:"./common/actor/Tsumugi-01.png"}catch{return"./common/actor/Tsumugi-01.png"}},messageText(){try{return this.scenario[this.pageIndex].message[this.messageIndex].text}catch{return"LAST"}}}},j=i(89);const E=(0,j.Z)(Z,[["render",D],["__scopeId","data-v-a5289dde"]]);var H=E}}]);
//# sourceMappingURL=352.1872ccc5.js.map