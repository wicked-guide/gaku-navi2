"use strict";(self["webpackChunkgaku_navi2"]=self["webpackChunkgaku_navi2"]||[]).push([[264],{5264:function(s,e,i){i.r(e),i.d(e,{default:function(){return E}});var t=i(3396),a=i(9242),c=i(7139);const n=s=>((0,t.dD)("data-v-6bb83d2e"),s=s(),(0,t.Cn)(),s),o={class:"wapper"},r={class:"leftMenu"},l=n((()=>(0,t._)("span",{class:"material-icons md-18"},"skip_previous",-1))),h=[l],u=n((()=>(0,t._)("span",{class:"material-icons md-18"},"menu",-1))),d=[u],m={class:"courseIndex"},g={class:"part"},p={class:"slideArea"},x=["src"],_={class:"messageArea"},I={class:"messageMenu"},w={style:{display:"flex"}},k=n((()=>(0,t._)("span",{class:"material-icons md-18"},"face",-1))),v=[k],C={class:"flex"},y=n((()=>(0,t._)("span",{class:"material-icons md-18"},"textsms",-1))),V=[y],S=n((()=>(0,t._)("span",{class:"material-icons md-18"},"music_note",-1))),f=[S],b=n((()=>(0,t._)("span",{class:"material-icons md-18"},"loop",-1))),T=[b],A=n((()=>(0,t._)("span",{class:"material-icons md-18"},"stop",-1))),F=[A],M=n((()=>(0,t._)("span",{class:"material-icons md-18"},"play_arrow",-1))),D=[M],$={class:"voiceSpeed"},z=n((()=>(0,t._)("span",{class:"material-icons md-18"},"speed",-1))),N=["src"],P={class:"message"},L={class:"rightMenu"},H=n((()=>(0,t._)("span",{class:"material-icons md-18"},"menu",-1))),J=[H],Y=["onClick"];function Z(s,e,i,n,l,u){const k=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("section",o,[(0,t._)("nav",r,[(0,t.Wm)(k,{to:{name:"IndexList",params:{course:l.course}}},{default:(0,t.w5)((()=>[(0,t._)("button",{onClick:e[0]||(e[0]=(...s)=>u.reset&&u.reset(...s))},h)])),_:1},8,["to"]),(0,t.wy)((0,t._)("br",null,null,512),[[a.F8,!l.isCourseIndex]]),(0,t._)("button",{class:"btn",onClick:e[1]||(e[1]=s=>l.isCourseIndex=!l.isCourseIndex)},d),(0,t.wy)((0,t._)("div",m,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.courseIndex,(s=>((0,t.wg)(),(0,t.iD)(t.HY,{key:s},[(0,t._)("div",g,(0,c.zw)(s.part),1),(0,t._)("ul",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.chapter,(s=>(0,t.wy)(((0,t.wg)(),(0,t.iD)("li",{key:s,class:(0,c.C_)([{istrue:s.href==l.id}])},[(0,t.Wm)(k,{to:{name:"lecture",params:{course:l.course,id:s.href}},class:(0,c.C_)([{istrue:s.href==l.id}]),onClick:e=>u.courseJump(s.href)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(s.title),1)])),_:2},1032,["to","class","onClick"])],2)),[[a.F8,"#"!=s.href]]))),128))])],64)))),128))],512),[[a.F8,l.isCourseIndex]])]),(0,t._)("main",null,[(0,t._)("section",p,[(0,t._)("img",{src:u.slideImage,class:(0,c.C_)(["slideImg",l.isText?"texton":"textoff"]),alt:"slide"},null,10,x)]),(0,t._)("section",_,[(0,t._)("section",I,[(0,t._)("section",w,[(0,t._)("button",{class:(0,c.C_)(l.isActor?"isTrue":"isFalse"),onClick:e[2]||(e[2]=(...s)=>u.switchActor&&u.switchActor(...s))},v,2),(0,t._)("div",{class:(0,c.C_)(["actorName",{none:!l.isActor}])},(0,c.zw)(u.actorName),3)]),(0,t._)("section",C,[(0,t._)("button",{class:(0,c.C_)([l.isText?"isTrue":"isFalse","textbtn"]),onClick:e[3]||(e[3]=s=>l.isText=!l.isText)},V,2),(0,t._)("button",{class:(0,c.C_)(l.isVoice?"isTrue":"isFalse"),onClick:e[4]||(e[4]=(...s)=>u.switchVoice&&u.switchVoice(...s))},f,2),(0,t._)("button",{class:(0,c.C_)(l.isSkip?"isTrue":"isFalse"),onClick:e[5]||(e[5]=(...s)=>u.switchSkip&&u.switchSkip(...s))},T,2),(0,t._)("button",{onClick:e[6]||(e[6]=(...s)=>u.voiceStop&&u.voiceStop(...s))},F),(0,t._)("button",{onClick:e[7]||(e[7]=(...s)=>u.voicePlay&&u.voicePlay(...s))},D),(0,t._)("div",$,[z,(0,t.wy)((0,t._)("input",{type:"range",min:"0.5",max:"2",step:"0.1","onUpdate:modelValue":e[8]||(e[8]=s=>l.voiceSpeed=s)},null,512),[[a.nr,l.voiceSpeed]]),(0,t._)("div",null,(0,c.zw)(l.voiceSpeed),1)])])]),(0,t.wy)((0,t._)("section",{class:"messagewindow",onClick:e[9]||(e[9]=(...s)=>u.next&&u.next(...s))},[(0,t.wy)((0,t._)("section",null,[(0,t._)("img",{src:u.actorImage,class:"actor",alt:"actor"},null,8,N)],512),[[a.F8,l.isActor]]),(0,t._)("section",P,(0,c.zw)(u.messageText),1)],512),[[a.F8,l.isText]])])]),(0,t._)("nav",L,[(0,t._)("button",{onClick:e[10]||(e[10]=(...s)=>u.switchMenu&&u.switchMenu(...s))},J),(0,t.wy)((0,t._)("ul",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.scenario,((s,e)=>((0,t.wg)(),(0,t.iD)("li",{key:e,class:(0,c.C_)({isTrue:e==l.pageIndex}),onClick:s=>u.pageJump(e)},(0,c.zw)(("00"+(e+1)).slice(-2))+"："+(0,c.zw)(s.title),11,Y)))),128))],512),[[a.F8,l.isMenu]])])])}var j=i(4161),K={name:"LectureView",data(){return{course:this.$route.params.course,id:this.$route.params.id,courseIndex:[],scenario:[],isCourseIndex:!1,isText:!0,isActor:!0,isMenu:!0,isVoice:!0,isSkip:!0,pageIndex:0,messageIndex:0,messageVoice:new Audio(""),voiceSpeed:1}},mounted(){const s="../"+this.course+"/index.json";j.Z.get(s).then((s=>this.courseIndex=s.data)).catch((s=>{console.log("course制作中です",s),this.courseIndex=[{part:"制作中"}]}));const e=`./${this.course}/${this.id}/scenario.json`;j.Z.get(e).then((s=>this.scenario=s.data)).catch((s=>{console.log(s),this.scenario=[{part:"制作中"}]}))},methods:{getScenario(){const s="../"+this.course+"/"+this.id+"/scenario.json";j.Z.get(s).then((s=>this.scenario=s.data)).catch((s=>{console.log("scenario制作中です",s),this.scenario=[{part:"制作中"}]}))},switchActor(){this.isActor=!this.isActor},switchVoice(){this.isVoice=!this.isVoice,this.isVoice||(this.isSkip=!1)},switchSkip(){this.isSkip=!this.isSkip,this.isSkip&&(this.isVoice=!0)},switchMenu(){this.isMenu=!this.isMenu},pageJump(s){this.pageIndex=s,this.messageIndex=0,this.messageVoice.pause(),this.isVoice&&this.voicePlay()},courseJump(s){this.messageVoice.pause(),this.id=s,this.getScenario(),this.pageIndex=0,this.messageIndex=0},next(){if(this.messageVoice.pause(),this.messageIndex++,"LAST"==this.messageText){if(this.scenario.length==this.pageIndex+1)return void this.messageIndex--;this.pageIndex++,this.messageIndex=0}this.isVoice&&this.voicePlay()},voicePlay(){this.messageVoice.pause();let s=this.scenario[this.pageIndex].message[this.messageIndex].voice;s?(this.messageVoice=new Audio("./"+this.course+"/"+this.id+"/voice/"+s),this.messageVoice.playbackRate=this.voiceSpeed,this.messageVoice.play(),this.messageVoice.addEventListener("ended",(()=>{this.isSkip&&this.next()}))):(this.messageIndex++,this.voicePlay())},voiceStop(){this.messageVoice.pause()},reset(){this.messageVoice.pause(),this.pageIndex=0,this.messageIndex=0}},computed:{slideImage(){try{return this.scenario[this.pageIndex].message[this.messageIndex].slide?`./${this.course}/${this.id}/img/${this.scenario[this.pageIndex].message[this.messageIndex].slide}`:"./common/background/cloud2.png"}catch{return{mes:"制作中です"}}},actorName(){try{return this.scenario[this.pageIndex].message[this.messageIndex].actor?this.scenario[this.pageIndex].message[this.messageIndex].actor:"No Name"}catch{return"No Name"}},actorImage(){try{return this.scenario[this.pageIndex].message[this.messageIndex].actorImg?`./common/actor/${this.scenario[this.pageIndex].message[this.messageIndex].actorImg}`:"./common/actor/Tsumugi-01.png"}catch{return"./common/actor/Tsumugi-01.png"}},messageText(){try{return this.scenario[this.pageIndex].message[this.messageIndex].text}catch{return"LAST"}}}},U=i(89);const W=(0,U.Z)(K,[["render",Z],["__scopeId","data-v-6bb83d2e"]]);var E=W}}]);
//# sourceMappingURL=264.847e283f.js.map