"use strict";(self["webpackChunkgaku_navi2"]=self["webpackChunkgaku_navi2"]||[]).push([[766],{7766:function(s,e,i){i.r(e),i.d(e,{default:function(){return F}});var t=i(3396),a=i(7139),c=i(9242);const n=s=>((0,t.dD)("data-v-6a430746"),s=s(),(0,t.Cn)(),s),o={class:"wapper"},r={class:"leftMenu"},h=n((()=>(0,t._)("span",{class:"material-icons md-18"},"skip_previous",-1))),m=[h],l={class:"slideArea"},u=["src"],g={class:"messageArea"},d={class:"messageMenu"},p={style:{display:"flex"}},_=n((()=>(0,t._)("span",{class:"material-icons md-18"},"face",-1))),x=[_],I=n((()=>(0,t._)("span",{class:"material-icons md-18"},"music_note",-1))),k=n((()=>(0,t._)("span",{class:"material-icons md-18"},"loop",-1))),w=n((()=>(0,t._)("span",{class:"material-icons md-18"},"stop",-1))),v=n((()=>(0,t._)("span",{class:"material-icons md-18"},"play_arrow",-1))),V=["src"],C={class:"message"},y={class:"rightMenu"},A=n((()=>(0,t._)("span",{class:"material-icons md-18"},"menu",-1))),S=[A],f=["onClick"];function b(s,e,i,n,h,_){const A=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("section",o,[(0,t._)("nav",r,[(0,t.Wm)(A,{to:{name:"IndexList",params:{course:h.course}}},{default:(0,t.w5)((()=>[(0,t._)("button",{onClick:e[0]||(e[0]=(...s)=>_.reset&&_.reset(...s))},m)])),_:1},8,["to"])]),(0,t._)("main",null,[(0,t._)("section",l,[(0,t._)("img",{src:_.slideImage,class:"slideImg",alt:"slide"},null,8,u)]),(0,t._)("section",g,[(0,t._)("section",d,[(0,t._)("section",p,[(0,t._)("button",{class:(0,a.C_)(h.isActor?"isTrue":"isFalse"),onClick:e[1]||(e[1]=(...s)=>_.switchActor&&_.switchActor(...s))},x,2),(0,t._)("div",{class:(0,a.C_)(["actorName",{none:!h.isActor}])},(0,a.zw)(_.actorName),3)]),(0,t._)("section",null,[(0,t._)("button",{class:(0,a.C_)(h.isVoice?"isTrue":"isFalse"),onClick:e[2]||(e[2]=(...s)=>_.switchVoice&&_.switchVoice(...s))},[(0,t.Uk)(" 音声"),I],2),(0,t._)("button",{class:(0,a.C_)(h.isSkip?"isTrue":"isFalse"),onClick:e[3]||(e[3]=(...s)=>_.switchSkip&&_.switchSkip(...s))},[(0,t.Uk)(" 自動"),k],2),(0,t._)("button",{onClick:e[4]||(e[4]=(...s)=>_.voiceStop&&_.voiceStop(...s))},[(0,t.Uk)(" 停止"),w]),(0,t._)("button",{onClick:e[5]||(e[5]=(...s)=>_.voicePlay&&_.voicePlay(...s))},[(0,t.Uk)(" 再生"),v])])]),(0,t._)("section",{class:"messagewindow",onClick:e[6]||(e[6]=(...s)=>_.next&&_.next(...s))},[(0,t.wy)((0,t._)("section",null,[(0,t._)("img",{src:_.actorImage,class:"actor",alt:"actor"},null,8,V)],512),[[c.F8,h.isActor]]),(0,t._)("section",C,(0,a.zw)(_.messageText),1)])])]),(0,t._)("nav",y,[(0,t._)("button",{onClick:e[7]||(e[7]=(...s)=>_.switchMenu&&_.switchMenu(...s))},S),(0,t.wy)((0,t._)("ul",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(h.scenario,((s,e)=>((0,t.wg)(),(0,t.iD)("li",{key:e,class:(0,a.C_)({isTrue:e==h.pageIndex}),onClick:s=>_.pageJump(e)},(0,a.zw)(("00"+(e+1)).slice(-2))+"："+(0,a.zw)(s.title),11,f)))),128))],512),[[c.F8,h.isMenu]])])])}var T=i(6943),M={name:"LectureView",data(){return{course:this.$route.params.course,id:this.$route.params.id,scenario:[],isActor:!0,isMenu:!0,isVoice:!0,isSkip:!0,pageIndex:0,messageIndex:0,messageVoice:new Audio("")}},mounted(){const s=`./${this.course}/${this.id}/scenario.json`;T.Z.get(s).then((s=>this.scenario=s.data)).catch((s=>{console.log(s),this.scenario=[{part:"制作中"}]}))},methods:{switchActor(){this.isActor=!this.isActor},switchVoice(){this.isVoice=!this.isVoice,this.isVoice||(this.isSkip=!1)},switchSkip(){this.isSkip=!this.isSkip,this.isSkip&&(this.isVoice=!0)},switchMenu(){this.isMenu=!this.isMenu},pageJump(s){this.pageIndex=s,this.messageIndex=0,this.messageVoice.pause(),this.isVoice&&this.voicePlay()},next(){if(this.messageVoice.pause(),this.messageIndex++,"LAST"==this.messageText){if(this.scenario.length==this.pageIndex+1)return void this.messageIndex--;this.pageIndex++,this.messageIndex=0}this.isVoice&&this.voicePlay()},voicePlay(){this.messageVoice.pause();let s=this.scenario[this.pageIndex].message[this.messageIndex].voice;s&&(this.messageVoice=new Audio("./"+this.course+"/"+this.id+"/voice/"+s),this.messageVoice.play(),this.messageVoice.addEventListener("ended",(()=>{this.isSkip&&this.next()})))},voiceStop(){this.messageVoice.pause()},reset(){this.messageVoice.pause(),this.pageIndex=0,this.messageIndex=0}},computed:{slideImage(){try{return this.scenario[this.pageIndex].message[this.messageIndex].slide?`./${this.course}/${this.id}/img/${this.scenario[this.pageIndex].message[this.messageIndex].slide}`:"./common/background/sky_blue.png"}catch{return{mes:"制作中です"}}},actorName(){try{return this.scenario[this.pageIndex].message[this.messageIndex].actor?this.scenario[this.pageIndex].message[this.messageIndex].actor:"No Name"}catch{return"No Name"}},actorImage(){try{return this.scenario[this.pageIndex].message[this.messageIndex].actorImg?`./common/actor/${this.scenario[this.pageIndex].message[this.messageIndex].actorImg}`:"./common/actor/Tsumugi-01.png"}catch{return"./common/actor/Tsumugi-01.png"}},messageText(){try{return this.scenario[this.pageIndex].message[this.messageIndex].text}catch{return"LAST"}}}},$=i(89);const N=(0,$.Z)(M,[["render",b],["__scopeId","data-v-6a430746"]]);var F=N}}]);
//# sourceMappingURL=766.1d3764d8.js.map